import logging
import os
from aiogram import Bot, Dispatcher, types
from aiogram.fsm.storage.memory import MemoryStorage
from aiogram.utils import executor

API_TOKEN = '7867522162:AAF3P_-a125ILYYM0FGwvMccFlSaTPRaeF0'  # –í–∞—à —Ç–æ–∫–µ–Ω
CHANNEL_LINK = 'https://t.me/clicktobetbot'  # –í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª

logging.basicConfig(level=logging.INFO)
bot = Bot(token=API_TOKEN)
storage = MemoryStorage()
dp = Dispatcher(bot, storage=storage)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start
@dp.message_handler(commands=['start'])
async def send_welcome(message: types.Message):
    user = message.from_user
    username = user.username or "–±–µ–∑ username"
    print(f"üîî –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user.id} (@{username})")
    await message.answer(
        f"–ü—Ä–∏–≤–µ—Ç, {user.first_name}!\n\n"
        f"–ó–¥–µ—Å—å –ø—É–±–ª–∏–∫—É—é —Å—Ö–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç üí∏\n"
        f"–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª ‚Äî –≤—Å—ë —Ç–∞–º üëá",
        reply_markup=types.InlineKeyboardMarkup().add(
            types.InlineKeyboardButton("–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª üì≤", url=CHANNEL_LINK)
        )
    )

if __name__ == '__main__':
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º dispatcher –¥–ª—è –∑–∞–ø—É—Å–∫–∞ polling
    dp.start_polling()
